{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Meal Plan Schema",
    "type": "object",
    "properties": {
        "planId": {
            "type": "string",
            "description": "Unique identifier for the meal plan"
        },
        "userId": {
            "type": "string",
            "description": "User identifier (optional)"
        },
        "planName": {
            "type": "string",
            "description": "Name or title for the meal plan"
        },
        "totalDays": {
            "type": "integer",
            "minimum": 1,
            "description": "Number of days in the meal plan"
        },
        "targetCaloriesPerDay": {
            "type": "integer",
            "minimum": 100,
            "maximum": 5000,
            "description": "Target daily calorie intake"
        },
        "dietaryPreference": {
            "type": "string",
            "description": "Primary dietary preference"
        },
        "days": {
            "type": "array",
            "minItems": 1,
            "items": {
                "$ref": "#/definitions/day"
            }
        },
        "nutritionSummary": {
            "$ref": "#/definitions/nutritionSummary"
        },
        "generatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the meal plan was generated"
        }
    },
    "required": [ "planId", "planName", "totalDays", "targetCaloriesPerDay", "days", "generatedAt" ],
    "definitions": {
        "day": {
            "type": "object",
            "properties": {
                "dayNumber": {
                    "type": "integer",
                    "minimum": 1,
                    "description": "Day number in the plan"
                },
                "date": {
                    "type": "string",
                    "format": "date",
                    "description": "Date for this day (optional)"
                },
                "meals": {
                    "type": "array",
                    "minItems": 1,
                    "items": {
                        "$ref": "#/definitions/meal"
                    }
                },
                "dailyNutrition": {
                    "$ref": "#/definitions/nutrition"
                }
            },
            "required": [ "dayNumber", "meals", "dailyNutrition" ]
        },
        "meal": {
            "type": "object",
            "properties": {
                "mealType": {
                    "type": "string",
                    "enum": [ "Breakfast", "Lunch", "Dinner", "Snack" ],
                    "description": "Type of meal"
                },
                "mealTime": {
                    "type": "string",
                    "description": "Suggested time for the meal (e.g., '8:00 AM')"
                },
                "recipe": {
                    "$ref": "#/definitions/recipeReference"
                },
                "servings": {
                    "type": "number",
                    "minimum": 0.1,
                    "description": "Number of servings of this recipe"
                },
                "nutrition": {
                    "$ref": "#/definitions/nutrition"
                }
            },
            "required": [ "mealType", "recipe", "servings", "nutrition" ]
        },
        "recipeReference": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "string",
                    "description": "Recipe identifier"
                },
                "title": {
                    "type": "string",
                    "description": "Recipe title"
                },
                "description": {
                    "type": "string",
                    "description": "Brief recipe description"
                },
                "prepTimeMinutes": {
                    "type": "integer",
                    "minimum": 0,
                    "description": "Preparation time in minutes"
                },
                "cookTimeMinutes": {
                    "type": "integer",
                    "minimum": 0,
                    "description": "Cooking time in minutes"
                },
                "difficulty": {
                    "type": "string",
                    "enum": [ "Easy", "Medium", "Hard" ],
                    "description": "Recipe difficulty level"
                },
                "cuisine": {
                    "type": "string",
                    "description": "Cuisine type"
                },
                "ingredients": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "description": "List of ingredients"
                },
                "instructions": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "description": "Cooking instructions"
                }
            },
            "required": [ "id", "title", "ingredients", "instructions" ]
        },
        "nutrition": {
            "type": "object",
            "properties": {
                "calories": {
                    "type": "integer",
                    "minimum": 0,
                    "description": "Total calories"
                },
                "protein": {
                    "type": "number",
                    "minimum": 0,
                    "description": "Protein in grams"
                },
                "carbohydrates": {
                    "type": "number",
                    "minimum": 0,
                    "description": "Carbohydrates in grams"
                },
                "fat": {
                    "type": "number",
                    "minimum": 0,
                    "description": "Fat in grams"
                },
                "fiber": {
                    "type": "number",
                    "minimum": 0,
                    "description": "Fiber in grams"
                },
                "sugar": {
                    "type": "number",
                    "minimum": 0,
                    "description": "Sugar in grams"
                },
                "sodium": {
                    "type": "number",
                    "minimum": 0,
                    "description": "Sodium in milligrams"
                }
            },
            "required": [ "calories", "protein", "carbohydrates", "fat" ]
        },
        "nutritionSummary": {
            "type": "object",
            "properties": {
                "averageDailyCalories": {
                    "type": "integer",
                    "minimum": 0,
                    "description": "Average daily calories across all days"
                },
                "totalDays": {
                    "type": "integer",
                    "minimum": 1,
                    "description": "Total number of days"
                },
                "averageMacros": {
                    "$ref": "#/definitions/nutrition"
                }
            },
            "required": [ "averageDailyCalories", "totalDays", "averageMacros" ]
        }
    }
}
